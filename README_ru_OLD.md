# Создание NFT-коллекции в основной сети TON

> ❤️ Инструкция и инструменты подготовлены командой [TON Diamonds](https://ton.diamonds) - первый NFT проект в TON.

> [English version](https://github.com/tondiamonds/ton-nft-deployer/blob/main/README.md)

Если вы автор NFT-коллекции для TON, но не обладаете большими техническими навыками, вам лучше подождать когда NFT-маркетпейсы (например, [https://getgems.io](https://getgems.io)) сделают у себя UI для создания коллекций.

Маркетплейсы сейчас ведут работу над этим функционалом, создать коллекцию через веб-сайт маркетплейса будет не сложнее публикации фото в социальных сетях.

Более продвинутые пользователи могут сделать деплой уже сейчас.

## Подготовка

1) Заведите новый кошелек (например, в [Tonkeeper](https://tonkeeper.com/) или [https://wallet.ton.org](https://wallet.ton.org)).

   Этот кошелек будет управлять коллекцией.

   Только с него можно будет создавать новые NFT токены этой коллекции или поменять общие данные коллекции.

2) При создании кошелька обязательно запишите 24 английских слова для восстановления.

   Обязательно сохраните их в надежном секретном месте.

   Если вы их потеряете, то навсегда потеряете доступ к своему кошельку и управлению коллекцией.

   Никто кроме вас не должен знать ваши секретные фразы.

3) Положите тонкойны на ваш кошелек.

   На создание одного NFT нужно пример ~0.07 TON (например, если вы хотите создать 1000 NFT, вам надо примерно 70 TON).

4) Воспользуйтесь [веб-страницой](https://tondiamonds.github.io/ton-nft-deployer/) или скриптом из репозитория для деплоя.

## Веб-страница

* Откройте https://tondiamonds.github.io/ton-nft-deployer/.

* В `Wallet Mnemonic` введите ваши 24 слова через пробел (ваши слова используются локально и не отправляются на сторонние сервера).

* В `Wallet Address` введите адрес вашего кошелька.

* В `Wallet Type` введите версию вашего кошелька. Если вы только что его создали, то скорей всего это v3R2, либо v4R2.

* Если `Wallet Type` и `Wallet Address` не будут совпадать, то скрипт не запустится. В случае затруднений, версию вашего кошелька можно найти попробовав другие варианты.

* В `Start Index` введите -1

* В `Ton Api Uri` введите [https://toncenter.com/api/v2/jsonRPC](https://toncenter.com/api/v2/jsonRPC)

* В `Ton Api Key` введите ваш API key от [https://toncenter.com](https://toncenter.com) (его можно получить в [боте](https://t.me/tonapibot) бесплатно).

* В `Collection Royalty` введите ожидаемый процент который вы хотите получать от перепродаж ваших NFT. Задается дробью. Например, если вы хотите 1% - то введите 0.01, если 15% - то 0.15.

* В `Collection content URL` введите ссылку на метадату коллекции. Этот файл должен хоститься на вашей стороне. Впоследствии, если возникнет необходимость, вы сможете поменять эту ссылку в смарт контракте.

* В `Collection base URL` введите общий путь к метадатам ваших токенов в формате JSON. Например, если вы введете [http://yourcollection.com/nft/](http://yourcollection.com/nft/) то
* метадата первого токена должна быть размещена по адресу [http://yourcollection.com/nft/0.json](http://yourcollection.com/nft/0.json), второго по адресу по адресу [http://yourcollection.com/nft/1.json](http://yourcollection.com/nft/1.json) и т.д.
* Эти файлы должны хоститься на вашей стороне.
* Впоследствии, если возникнет необходимость, вы сможете поменять этот путь.

* В `Deploy Amount` введите сколько тонкойнов нужно перевести с кошелька на коллекцию. При деплое нфт с контракта коллекции будет списываться ~0.02 TON на газ, так что если деплоите 1000 нфт лучше сразу положить 20 TON.

* В `Topup Amount` введите по сколько тонкойнов нужно докладывать c кошелька на коллекцию, в случае если там закончился баланс. Рекомендуется значение в 1 тонкойн.

* В `CSV to Deploy` загрузите .csv файл следующего формата: <номер нфт>:<адрес кошелька владельца этого нфт>. Если поле владельца кошелька пустое, владельцем будет назначен деплоер.

   Например:
```
   0,EQArpDCADpdZ23S8CeqmC-uvYX8PepLj9bW5I_FiVZP9s4ma
   1,EQARz2mCJKlueMQNrbgNVnSC1vb8Jt3JBTxRievSnUYULpnv
   2
```

   Структура списка для выгрузки NFT имеет строгий порядок. Нумерация начинается с нуля и не должна иметь разрывов (0, 1, 2, 3 итд).

* Запустите деплой, нажав `Start Deploy`

Исходные коды веб-страницы можно найти в этом репозитории.

## Проверка

* Откройте в [https://tonscan.org](https://tonscan.org) адрес вашего кошелька

* Вы будете видеть исходящие транзакции с вашего кошелька на адрес коллекции

* Откройте [https://tonscan.org/nft/](https://tonscan.org/nft/)<адрес_вашей_коллекции>. Проверьте, что отображаемые данные верны.

* С вашей коллекции будут исходящие транзакции - создание токенов

* Откройте [https://tonscan.org/nft/](https://tonscan.org/nft/)<адрес_токена>. Проверьте, что отображаемые данные верны.

## Скрипт

В этом репозитории содержится open-source скрипт на javascript для деплоя NFT-коллекции.

В [script.md](https://github.com/tondiamonds/ton-nft-deployer/blob/main/script.md) описано как его запускать.

Параметры .env совпадают с параметрами веб-страницы, так что описание параметров можете посмотреть в предыдущем параграфе.

## Основны деплоя NFT

Ваши смарт-контракты должны быть совместимы с [стандартом NFT](https://github.com/ton-blockchain/TIPs/issues/62).

Контракты находятся по адресу [https://github.com/ton-blockchain/token-contract/tree/main/nft](https://github.com/ton-blockchain/token-contract/tree/main/nft)

`nft-collection-editable.fc` для коллекции и `nft-item.fc` для элемента коллекции.

JavaScript SDK [TonWeb](https://github.com/toncenter/tonweb) версии 0.0.38 и выше (версия важна!) также использует эти смарт-контракты.

Веб-страница и скрипт, представленные выше, используют TonWeb.
